<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Yuuki Theory – Interference Field Visualizer</title>

<!--
Yuuki Theory – Interference Field Visualizer
© 2026 Yuuki Theory
ORCID: 0009-0003-5736-5297
License: CC BY-NC 4.0
-->

<style>
  body {
    margin: 0;
    background: #05070a;
    color: #e0e0e0;
    font-family: system-ui, sans-serif;
    overflow: hidden;
  }
  #ui {
    position: fixed;
    top: 10px;
    left: 10px;
    background: rgba(20,30,40,0.85);
    border: 1px solid #00ffcc;
    border-radius: 10px;
    padding: 10px;
    font-size: 13px;
    z-index: 10;
  }
  select {
    background: #000;
    color: #0ff;
    border: 1px solid #0ff;
    padding: 4px;
  }
  canvas {
    display: block;
  }
</style>
</head>

<body>

<div id="ui">
  <div><b>Yuuki Theory</b></div>
  <div>Scale:</div>
  <select id="scaleSelect">
    <option value="cosmic">Cosmic (Universe)</option>
    <option value="galactic">Galactic</option>
    <option value="solar">Solar System</option>
    <option value="atomic">Atomic</option>
  </select>
  <div id="status" style="margin-top:6px;color:#ff8080;"></div>
</div>

<canvas id="canvas"></canvas>

<script>
/* ===============================
   Canvas Setup
================================ */
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* ===============================
   Scale Definitions (Yuuki)
================================ */
const scales = {
  cosmic:   { density: 0.8, fieldStrength: 1.0, rotationSpeed: 1.0 },
  galactic:{ density: 1.1, fieldStrength: 1.1, rotationSpeed: 1.2 },
  solar:   { density: 0.4, fieldStrength: 0.6, rotationSpeed: 0.7 },
  atomic:  { density: 0.9, fieldStrength: 0.3, rotationSpeed: 1.5 }
};

let currentScale = scales.cosmic;

/* ===============================
   Particles = Interference Field
================================ */
const particles = [];
const PARTICLE_COUNT = 160;

for (let i = 0; i < PARTICLE_COUNT; i++) {
  particles.push({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    vx: (Math.random() - 0.5) * 1.5,
    vy: (Math.random() - 0.5) * 1.5
  });
}

/* ===============================
   Black Hole Logic (Core)
================================ */
const BH_THRESHOLD = 1.2;
let blackHoleActive = false;

const BH = {
  x: () => canvas.width / 2,
  y: () => canvas.height / 2,
  radius: 0
};

function checkBlackHole() {
  const stress =
    currentScale.density *
    currentScale.fieldStrength *
    currentScale.rotationSpeed;
  blackHoleActive = stress > BH_THRESHOLD;
}

/* ===============================
   Drawing Functions
================================ */
function drawParticles() {
  ctx.fillStyle = "rgba(0,255,255,0.6)";
  particles.forEach(p => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 1.6, 0, Math.PI * 2);
    ctx.fill();
  });
}

function drawBlackHole(time) {
  if (!blackHoleActive) return;

  BH.radius = 18 + Math.sin(time * 2) * 4;

  const g = ctx.createRadialGradient(
    BH.x(), BH.y(), 0,
    BH.x(), BH.y(), BH.radius
  );
  g.addColorStop(0, "rgba(0,0,0,1)");
  g.addColorStop(0.7, "rgba(20,20,30,0.9)");
  g.addColorStop(1, "rgba(0,255,255,0.15)");

  ctx.beginPath();
  ctx.fillStyle = g;
  ctx.arc(BH.x(), BH.y(), BH.radius, 0, Math.PI * 2);
  ctx.fill();
}

/* ===============================
   Update Loop
================================ */
function update(time) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  checkBlackHole();

  particles.forEach(p => {
    p.x += p.vx;
    p.y += p.vy;

    if (blackHoleActive) {
      p.vx *= 0.93;
      p.vy *= 0.93;
    }

    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
  });

  drawParticles();
  drawBlackHole(time * 0.001);

  document.getElementById("status").textContent =
    blackHoleActive ? "BLACK HOLE STATE (Structural Collapse)" : "";

  requestAnimationFrame(update);
}
requestAnimationFrame(update);

/* ===============================
   UI Control
================================ */
document.getElementById("scaleSelect").addEventListener("change", e => {
  currentScale = scales[e.target.value];
});
</script>

</body>
</html>
